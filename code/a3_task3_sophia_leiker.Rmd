---
title: 'Task 3: Santa Barbara Urchins'
author: "Sophia Leiker"
date: "10/28/2021"
output: html_document
---

# Setup
- Attaching packages
- Setting code chunk options

```{r setup, include=TRUE, warning=FALSE, message=FALSE}
knitr::opts_chunk$set(echo = TRUE,warning = FALSE, message = FALSE)

#Attaching packages
library(here)
library(tidyverse)
library(janitor)
library(kableExtra)
```

# Overview 
In this data analysis, I am using data for red and purple urchins observed at 5 sites along the Santa Barbara coast to asses size comparisons, explore purple urchin counts by site and year, and make a finalized graph to visualize results. 

Data Citation: Reed, D. 2020. SBC LTER: Reef: Long-term experiment: Kelp removal: Urchin size frequency distribution ver 20. Environmental Data Initiative. https://doi.org/10.6073/pasta/5a1e9ef03aa47bd2225c0bb98a02a63b. 


# Section 1: Size Comparisons for Purple and Red Urchins 

### Reading in the data
- Reading in the urchins data set using here()
- Cleaning up the column names to lower snake
```{r}
urchins <- read_csv(here("data", "urchins.csv"), show_col_types = FALSE)

#Cleaning up the column names
urchins <- clean_names(urchins)
```

### Part 1: Data Visualization
- Comparing distribution of sizes between purple and red urchins with a histogram
- Reducing number of bins from ~30 to 10
```{r}
ggplot(data = urchins, aes(x = size)) + 
  geom_histogram(bins = 10) + 
  facet_wrap(~common_name) + 
  labs(x = "Size of urchin diamereter (cm), measued to nearest 0.5", y = "Count of urchins", title = "Comparing distribution of sizes between purple and red urchins (LEIKER)" ) +
  theme_minimal()


```

Figure 1: Comparing distributions of sea urchin sizes between purple sea urchins and red sea urchins with size defined as sea urchin diameter measure in cm to the nearest 0.5

### Part 2: Descriptive Statistics Table
- Creating finalized summary table that contains the following:Mean, Median, Standard deviation, Sample size 
- Rounding to only one decimal point because the measurements were taken were measured to the nearest 0.5
```{r}
urchins_stats <- urchins %>% 
  group_by(common_name) %>% 
  summarize(urchin_mean = round(mean(size), 1),
            urchin_median = round(median(size), 1),
            urchin_sd = round(sd(size),1),
            urchin_sample_size = n())
```

Updating Column Names in Urchin Stats
```{r}
urchins_stats <- rename(urchins_stats, "Common Name" = "common_name")
urchins_stats <- rename(urchins_stats, "Urchin Size Mean (cm)" = "urchin_mean")
urchins_stats <- rename(urchins_stats, "Urchin Size Median (cm)" = "urchin_median")
urchins_stats <- rename(urchins_stats, "Urchin Size Standard Deviation (cm)" = "urchin_sd")
urchins_stats <- rename(urchins_stats, "Sample Size" = "urchin_sample_size")

```


```{r}
urchins_stats %>% 
  kbl(caption = "Table 1: Sea Urchin Size Stats: Purple Urchins vs Red Urchins") %>% 
  kable_styling(full_width = F, html_font = "Cambria")
```

### Part 3: Overall takeaways 

We can see that overall the mean urchin size for red urchins are larger than purple urchins. The actual difference between the means is 2.3cm. Their percentage difference is Their standard differences (the measure of spread/dispersion of the sample) differ in that the purple urchin spread is lower (SD of 1.2) than the spread of the red urchin data (SD of 1.9). The percentage diff I used absolute difference between two numbers/average of the two numbers X100. 3.2/((4.5+6.8)/2)*100 = 56.6%

# Section 2: Exploring purple urchin counts by site and year


